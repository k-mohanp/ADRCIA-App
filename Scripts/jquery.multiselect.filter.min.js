(function(n){var t=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;n.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var t=this.options,r=n(this.element),i=this.instance=r.data("echMultiselect")||r.data("multiselect")||r.data("ech-multiselect"),e=this.header=i.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter"),f=this.wrapper=n('<div class="ui-multiselect-filter">'+(t.label.length?t.label:"")+'<input placeholder="'+t.placeholder+'" id="txtSearchPL" type="search"'+(/\d/.test(t.width)?'style="width:'+t.width+'px"':"")+" /><\/div>").prependTo(this.header),u;this.inputs=i.menu.find('input[type="checkbox"], input[type="radio"]');this.input=f.find("input").bind({keydown:function(n){n.which===13&&n.preventDefault()},keyup:n.proxy(this._handler,this),click:n.proxy(this._handler,this)});this.updateCache();i._toggleChecked=function(t,r){var u=r&&r.length?r:this.labels.find("input"),e=this,o=i._isOpen?":disabled, :hidden":":disabled",f;u=u.not(o).each(this._toggleState("checked",t));this.update();f=u.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&n.inArray(this.value,f)>-1&&e._toggleState("selected",t).call(this)});u.length&&this.element.trigger("change")};u=n(document).bind("multiselectrefresh",n.proxy(function(){this.updateCache();this._handler()},this));this.options.autoReset&&u.bind("multiselectclose",n.proxy(this._reset,this))},_handler:function(i){var u=n.trim(this.input[0].value.toLowerCase()),r=this.rows,e=this.inputs,o=this.cache,f;u?(r.hide(),f=new RegExp(u.replace(t,"\\$&"),"gi"),this._trigger("filter",i,n.map(o,function(n,t){return n.search(f)!==-1?(r.eq(t).show(),e.get(t)):null}))):r.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var t=n(this),i=t.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return n.css(this,"display")!=="none"}).length;t[i?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)");this.cache=this.element.children().map(function(){var t=n(this);return this.tagName.toLowerCase()==="optgroup"&&(t=t.children()),t.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){n.Widget.prototype.destroy.call(this);this.input.val("").trigger("keyup");this.wrapper.remove()}})})(jQuery);
//# sourceMappingURL=jquery.multiselect.filter.min.js.map
